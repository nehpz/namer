# Namer Configuration - Backlog Instance (Batch Processing)
# Aligns with your compose mounts and Namer's config schema

[namer]
# Core directories (inside the container)
watch_dir = /media/watch
work_dir = /media/work
failed_dir = /failed
dest_dir = /media/processed

# Naming template (same as cache)
name_template = [%D] %T - %P%S%E

[watchdog]
# Enable the watchdog and web UI (container still listens on 6980)
enabled = true
port = 6980
host = 0.0.0.0
# Backlog-friendly cadence
queue_limit = 25
extra_sleep_time = 60
# Automatic retries of failed queue daily at 04:00
retry_hour = 4
retry_minute = 0
manual_mode = false

[metadata]
# Use StashDB; API key is provided via env: STASHDB_API_KEY
provider = stashdb
endpoint = https://stashdb.org/graphql
update_metadata = true
write_nfo = true

[Phash]
# Enable perceptual hashing for matching
phash = true
search_phash = true

[permissions]
update_permissions_ownership = true
chmod_value = 0664
chown_user = nobody
chown_group = users

[logging]
log_file = /logs/namer-backlog.log
log_level = INFO
log_rotation = true
log_max_size = 10MB
log_backup_count = 5

# Optional: if you script moving from /media/intake to /media/watch externally,
# leave the following commented out. They are placeholders only.
# [backlog]
# intake_dir = /media/intake
# batch_size = 10
